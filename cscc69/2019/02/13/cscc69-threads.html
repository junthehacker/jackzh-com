<!DOCTYPE html>
<html>
    <head>
        <title>CSCC69 Operating Systems - Threads - Jun Zheng</title>
        <link href="https://fonts.googleapis.com/css?family=Shanti" rel="stylesheet" />
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
        <link href="/assets/css/style.css?v=1b7080a_20200116_165426" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.css" integrity="sha384-xNwWFq3SIvM4dq/1RUyWumk8nj/0KFg4TOnNcfzUU4X2gNn3WoRML69gO7waf3xh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="google-site-verification" content="3QG1yus3DT_i5qAC7SipJasW5cM13wwpNO1jesovSDY" />
        <link rel="shortcut icon" href="/assets/icons/favicon.png?v=1b7080a_20200116_165426" />
    </head>
    <body>
<div class="head-wrapper">
    <header>
        <div class="container">
            <h1>Jun Zheng <small>CSCC69 Operating Systems - Threads</small></h1>
        </div>
    </header>

<button id="mobile-nav-button"><i class="fa fa-angle-down" aria-hidden="true"></i> Navigation</button>
<nav class="navbar">
    <div class="container">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/experience.html">Experience</a></li>
            <li><a href="/education.html">Education</a></li>
            <li><a href="/posts.html">Posts</a></li>
            <li><a href="/contact.html">Contact</a></li>
        </ul>
    </div>
</nav>
</div>

<div class="page-wrapper">
    <div class="container">
        <div class="js-toc"></div>
        <br/>
        
            <span class="post-tag">cscc69</span>
        
            <span class="post-tag">course-notes</span>
        
        <div class="post-content">
            <h2 id="overview">Overview</h2>

<p>Threads are basically mini-processes within a process. However they share the same address space.</p>

<p>Creating threads are much faster than creating processes, in some systems, this can be 10x to 100x faster.</p>

<p>Think of threads as JS event loops, basically it.</p>

<h2 id="classic-thread-model">Classic Thread Model</h2>

<p>The classic thread model basically have all threads with their own stack and own PC.</p>

<p>Everything else is shared. The software library will take care of scheduling.</p>

<h2 id="posix-thread-standard">POSIX Thread Standard</h2>

<p>Some useful calls:</p>

<ul>
  <li>pthread_create: New thread</li>
  <li>pthread_exit: Quite the calling thread</li>
  <li>pthread_join: Wait for a thread to exit</li>
  <li>pthread_yield: Give up CPU for another thread</li>
  <li>pthread_attr_init: Create a thread attribute structure</li>
  <li>pthread_attr_destroy: Remove a thread‚Äôs attribute structure</li>
</ul>

<h2 id="user-space-thread-implementation">User Space Thread Implementation</h2>

<p>If implemented in user space, then the library have to take care of scheduling and switching. However if hardware do support store/load registers, this operation can be done very quickly, which is much faster than trapping to kernel.</p>

<p>And since everything is local, no context switch is needed, no kernel calls, it is very fast. Each process can also have its own scheduling algorithm.</p>

<h3 id="drawbacks">Drawbacks</h3>

<p>Thread cannot make blocking kernel calls, since that will halt all threads. Sometimes library will wrap the actual system call, but it is not really that nice to do.</p>

<p>Another issue is page fault. Which will be discussed in memory management (basically blocking the process because it needs to read instructions from disk).</p>

<p>In user space thread implementations, there is no clock interrupts. So a thread must give up the CPU before another thread can be run.</p>

<h2 id="kernel-space-thread-implementation">Kernel Space Thread Implementation</h2>


        </div>
    </div>
</div>


<footer>
    <div class="container">
        <div class="build">[production] 1b7080a_20200116_165426</div>
        Built and designed by myself üòù. GitHub: https://github.com/junthehacker/jackzh-com<br/>
        If you haven't done so, sign the <a href="http://manifesto.softwarecraftsmanship.org/#/en">Manifesto of Software Craftsmanship</a>.
        <a href="/opensource.html">Open Source</a>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.js" integrity="sha384-UP7zD+aGyuDvxWQEDSRYcvoTxJSD82C6VvuEBktJZGo25CVhDstY9sCDHvyceo9L" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickybits/3.5.8/stickybits.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/assets/js/app.js?v=1b7080a_20200116_165426"></script>
</body>
</html>

<script>
    tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.js-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h2, h3, h4, h5',
        collapseDepth: 2
    });
    stickybits('.js-toc');
</script>