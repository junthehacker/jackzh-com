<!DOCTYPE html>
<html>
    <head>
        <title>CSCB09 Software Tools and Systems Programming - Intro to UNIX - Jun Zheng</title>
        <link href="https://fonts.googleapis.com/css?family=Shanti" rel="stylesheet" />
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
        <link href="/assets/css/style.css?v=251e2e2_20191020_102157" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.css" integrity="sha384-xNwWFq3SIvM4dq/1RUyWumk8nj/0KFg4TOnNcfzUU4X2gNn3WoRML69gO7waf3xh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="google-site-verification" content="3QG1yus3DT_i5qAC7SipJasW5cM13wwpNO1jesovSDY" />
        <link rel="shortcut icon" href="/assets/icons/favicon.png?v=251e2e2_20191020_102157" />
    </head>
    <body>
<div class="head-wrapper">
    <header>
        <div class="container">
            <h1>Jun Zheng <small>CSCB09 Software Tools and Systems Programming - Intro to UNIX</small></h1>
        </div>
    </header>

<nav class="navbar">
    <div class="container">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/experience.html">Experience</a></li>
            <li><a href="/education.html">Education</a></li>
            <li><a href="/posts.html">Posts</a></li>
            <li><a href="/contact.html">Contact</a></li>
        </ul>
    </div>
</nav>
</div>


<div class="page-wrapper">
    <div class="container">
        <div class="js-toc"></div>
        <br/>
        
            <span class="post-tag">cscb09</span>
        
            <span class="post-tag">course-notes</span>
        
        <div class="post-content">
            <p>This article is mainly notes I have taken for CSCB09/CSC209 at UofT.</p>

<!--more-->

<p>Who is using Unix/Linux?</p>

<ul>
  <li>10% Desktop/Laptops</li>
  <li>85% Tablets/Smartphones</li>
  <li>65% Web Servers</li>
  <li>98% Super Computers</li>
</ul>

<h2 id="what-is-an-operating-system">What is an Operating System</h2>

<p><strong>The software layer between user applications and hardware.</strong></p>

<ul>
  <li>Resource manager</li>
  <li>Control program</li>
  <li>Abstractions</li>
</ul>

<p>One example of abstraction is files and directories. These are concepts defined within an OS.</p>

<h2 id="file">File</h2>

<p>File is a named collection of data with some attributes</p>

<ul>
  <li>name</li>
  <li>owner</li>
  <li>size</li>
  <li>permissions</li>
  <li>timestamps</li>
  <li>location on the actual hardware</li>
</ul>

<p>To get information of a file in Unix, you use the following commands</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -l
stat
</code></pre></div></div>

<h3 id="unix-implementation">UNIX Implementation</h3>

<p>Unix uses a data structure called <code class="highlighter-rouge">inode</code> to store information about a file. It is identified by <code class="highlighter-rouge">inode number</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>615 (inode number)
-------------------------
size                    |
owner                   |
timestamps              |
link/block counts       |
permissions             |
-------------------------
pointers to file blocks |
-------------------------
single indirect pointer | -&gt; pointers to next blocks
-------------------------
double indirect pointer |
-------------------------
triple indirect pointer |
-------------------------
</code></pre></div></div>

<h2 id="directories">Directories</h2>

<p>Directories is a collection of files.</p>

<p>In UNIX, every directory is a file.</p>

<h3 id="unix-implementation-1">UNIX Implementation</h3>

<p>Since directories are files, they also uses <code class="highlighter-rouge">inode</code>. Only special thing is that they contain data called <code class="highlighter-rouge">directory entries</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>615 (inode number)
-------------------------
size                    |
owner                   |
timestamps              |
link/block counts       |
permissions             |
-------------------------
pointers to file blocks |  -
-------------------------  |
single indirect pointer |  |
-------------------------  |---&gt; Directory entries contians other inode numbers
double indirect pointer |  |
-------------------------  |
triple indirect pointer |  -
-------------------------
</code></pre></div></div>

<h2 id="everything-is-a-file">Everything is a File</h2>

<p>In UNIX, all input / ouput are files.</p>

<ul>
  <li>regular files</li>
  <li>directories</li>
  <li>devices
    <ul>
      <li>camera</li>
      <li>sound</li>
      <li>network</li>
      <li>…..</li>
    </ul>
  </li>
</ul>

<h3 id="directory-hierarchy">Directory Hierarchy</h3>

<p>Directories are not trees, but an acyclic graph.</p>

<p>For example, graph below is an acyclic graph.</p>

<p><img src="https://www.evernote.com/l/Aq1tiBosESpIzamoLrozGN73oy1fq-epOJUB/image.png" alt="" /></p>

<h2 id="links">Links</h2>

<h3 id="hard-links">Hard Links</h3>

<p>To create a hard link, use following command</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln &lt;target&gt; &lt;name of link&gt;
</code></pre></div></div>

<p>The link will be identical to target, containing the same inode number. A file will only be removed if there are no more name/hard links.</p>

<p>So even if you remove the original file, the hard link is still valid.</p>

<h3 id="soft-links">Soft Links</h3>

<p>To create a soft link, use following command</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln -s &lt;target&gt; &lt;name of link&gt;
</code></pre></div></div>

<p>This will create a small file containing the true path of the linked file. Soft link will have different inode number. Think of it as a bookmark.</p>

<p>If you remove target, soft link will become invalid.</p>

<h2 id="permissions">Permissions</h2>

<p>Permissions in UNIX is very simple. When you run <code class="highlighter-rouge">ls -l</code>, you should see the following output:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drwx------@  8 junzheng  staff   256 19 Jul 04:20 Applications
drwxr-xr-x   3 junzheng  staff    96 31 May 13:24 CLionProjects
drwxrwxr-x@ 26 junzheng  staff   832 28 Jul 20:54 Creative Cloud Files
drwx------@ 15 junzheng  staff   480  2 Aug 21:33 Desktop
</code></pre></div></div>

<p><code class="highlighter-rouge">rwxr-xr-x</code> is the corresponding permissions for the file. It is structured like following</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User   Group    Other
rwx    r-x      r-x
</code></pre></div></div>

<p>Each entry have three permissions:</p>
<ul>
  <li>read</li>
  <li>write</li>
  <li>execute</li>
</ul>

<p>Directory permissions is similar to files, with <code class="highlighter-rouge">d</code> prefix.</p>

<ul>
  <li>read - You can <code class="highlighter-rouge">ls</code> directory</li>
  <li>write - You can create and remove files in directory</li>
  <li>execute - You can cd into the directory</li>
</ul>

<h3 id="modify-permissions">Modify Permissions</h3>

<p>To modify permissions, use <code class="highlighter-rouge">chmod</code>.</p>

<p>For example, following command will give owning user execute permission</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod u+x file_name
</code></pre></div></div>

<h2 id="shell">Shell</h2>

<p>Shell is simply a commandline interpreter, it is the interface between user and OS.</p>

<p>There are many shells to choose from:</p>

<ul>
  <li><code class="highlighter-rouge">sh</code> - Bourne shell
    <ul>
      <li>Most common</li>
      <li>Good for programming</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">csh</code> or <code class="highlighter-rouge">tcsh</code>
    <ul>
      <li>C-like syntax</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">bash</code> - Bourne again shell
    <ul>
      <li>Based on <code class="highlighter-rouge">sh</code> with some <code class="highlighter-rouge">csh</code> features</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">korn</code> - Commercial</li>
</ul>

<p>We usually use <code class="highlighter-rouge">bash</code>, it is a superset of <code class="highlighter-rouge">sh</code>.</p>

<h3 id="input-and-output-redirection">Input and Output Redirection</h3>

<p>By default, programs read from stdin and write to stdout. They also write errors to stderr.</p>

<p>However, you can change input/output/err.</p>

<ul>
  <li><code class="highlighter-rouge">&gt; file</code> redirect output to file</li>
  <li><code class="highlighter-rouge">&gt;&gt; file</code> appends output to file</li>
  <li><code class="highlighter-rouge">&lt; file</code> redirects input</li>
</ul>

<p>1 is stdout, 2 is stderr. You can redirect stderr using <code class="highlighter-rouge">2&gt; file</code>.</p>

<h3 id="pipelines">Pipelines</h3>

<p>Use <code class="highlighter-rouge">|</code> to redirect the output of a command to input of another command.</p>

<p>For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -l | wc -l
</code></pre></div></div>

<p>Will count the lines printed by <code class="highlighter-rouge">ls -l</code> command.</p>

<h3 id="filters">Filters</h3>

<p>Filters are programs, that reads from stdin, and outputs filtered result.</p>

<p>There are many to choose from</p>

<ul>
  <li><code class="highlighter-rouge">wc</code> - Count words, lines etc.</li>
  <li><code class="highlighter-rouge">grep</code> - Filter by pattern</li>
  <li><code class="highlighter-rouge">uniq</code> - Remove repeating lines</li>
  <li><code class="highlighter-rouge">sort</code> - Sorts the input</li>
  <li><code class="highlighter-rouge">head</code> - Get first lines</li>
  <li><code class="highlighter-rouge">tail</code> - Get last lines</li>
  <li><code class="highlighter-rouge">sed</code> - Text transformations</li>
</ul>

<h3 id="job-control">Job Control</h3>

<p>Use <code class="highlighter-rouge">ps</code> to view processes. There are two main types of processes:</p>

<ul>
  <li>Forground: has control of terminal</li>
  <li>Background: runs concurrently with shell in background</li>
</ul>

<p>To run a command in background, append &amp; to the name.</p>

<p>You can hit <code class="highlighter-rouge">ctrl+z</code> to suspend forground job.</p>

<ul>
  <li><code class="highlighter-rouge">jobs</code> will show a list of running jobs.</li>
  <li><code class="highlighter-rouge">fg &lt;id&gt;</code> will put <code class="highlighter-rouge">id</code> in foreground.</li>
  <li><code class="highlighter-rouge">bg &lt;id&gt;</code> will put <code class="highlighter-rouge">id</code> in background.</li>
  <li><code class="highlighter-rouge">kill %&lt;id&gt;</code> will kill job <code class="highlighter-rouge">id</code>.</li>
</ul>

<p><strong>Jobs are different from processes!</strong></p>

        </div>
    </div>
</div>


<footer>
    <div class="container">
        <div class="build">[production] 251e2e2_20191020_102157</div>
        Built and designed by myself 😝. GitHub: https://github.com/junthehacker/jackzh-com<br/>
        If you haven't done so, sign the <a href="http://manifesto.softwarecraftsmanship.org/#/en">Manifesto of Software Craftsmanship</a>.
        <a href="/opensource.html">Open Source</a>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.js" integrity="sha384-UP7zD+aGyuDvxWQEDSRYcvoTxJSD82C6VvuEBktJZGo25CVhDstY9sCDHvyceo9L" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickybits/3.5.8/stickybits.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/assets/js/app.js?v=251e2e2_20191020_102157"></script>
</body>
</html>

<script>
    tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.js-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h2, h3, h4, h5',
        collapseDepth: 2
    });
    stickybits('.js-toc');
</script>